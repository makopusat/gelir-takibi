<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Gelir/Gider Takip</title>
  <style>
    body {
      font-family: Arial;
      margin: 20px;
    }
    label, select, input, button {
      margin: 5px 0;
      display: block;
    }
    ul li {
      margin: 6px 0;
    }
    button {
      padding: 4px 8px;
    }
  </style>
</head>
<body>
  <h2>Gelir/Gider Takip Sistemi</h2>

  <form id="transactionForm">
    <label for="type">Tür:</label>
    <select id="type" required>
      <option value="Gelir">Gelir</option>
      <option value="Gider">Gider</option>
    </select>

    <label for="amount">Tutar:</label>
    <input type="number" id="amount" required>

    <label for="bank">Banka:</label>
    <select id="bank" required>
      <option value="">Seçiniz</option>
      <option value="Ziraat Bankası">Ziraat Bankası</option>
      <option value="İş Bankası">İş Bankası</option>
      <option value="Garanti BBVA">Garanti BBVA</option>
      <option value="Yapı Kredi">Yapı Kredi</option>
    </select>

    <label for="description">Açıklama:</label>
    <input type="text" id="description" required>

    <label for="date">Tarih:</label>
    <input type="date" id="date" required>

    <button type="submit">Ekle</button>
  </form>

  <h3>Toplam Kar: <span id="totalProfit">0</span> TL</h3>

  <h4>İşlem Listesi</h4>
  <ul id="transactionList"></ul>

  <script>
    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

    function updateUI() {
      let total = transactions.reduce((sum, t) => sum + (t.type === "Gelir" ? t.amount : -t.amount), 0);
      document.getElementById("totalProfit").textContent = total;

      const container = document.getElementById("transactionList");
      container.innerHTML = "";

      transactions.forEach((t, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          ${t.date} - ${t.type}: ${t.amount} TL - Banka: ${t.bank} - Açıklama: ${t.description}
          <button onclick="editTransaction(${index})">Düzenle</button>
          <button onclick="deleteTransaction(${index})" style="background-color:red;color:white;">Sil</button>
        `;
        container.appendChild(li);
      });
    }

    function editTransaction(index) {
      const t = transactions[index];

      const newType = prompt("Tür (Gelir/Gider):", t.type);
      const newAmount = parseFloat(prompt("Tutar:", t.amount));
      const newBank = prompt("Banka:", t.bank);
      const newDesc = prompt("Açıklama:", t.description);
      const newDate = prompt("Tarih (YYYY-MM-DD):", t.date);

      if (!newType || isNaN(newAmount) || !newBank || !newDesc || !newDate) return;

      transactions[index] = {
        type: newType,
        amount: newAmount,
        bank: newBank,
        description: newDesc,
        date: newDate
      };

      localStorage.setItem("transactions", JSON.stringify(transactions));
      updateUI();
    }

    function deleteTransaction(index) {
      if (confirm("Bu işlemi silmek istediğinize emin misiniz?")) {
        transactions.splice(index, 1);
        localStorage.setItem("transactions", JSON.stringify(transactions));
        updateUI();
      }
    }

    document.getElementById("transactionForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const type = document.getElementById("type").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const bank = document.getElementById("bank").value;
      const description = document.getElementById("description").value;
      const date = document.getElementById("date").value;

      if (!type || isNaN(amount) || !bank || !description || !date) return;

      transactions.push({ type, amount, bank, description, date });
      localStorage.setItem("transactions", JSON.stringify(transactions));

      this.reset();
      updateUI();
    });

    updateUI();
  </script>
</body>
</html>
